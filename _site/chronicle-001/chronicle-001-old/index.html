<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Whispers from the Esoteric Order | The Arkham Examiner</title>

    <!-- Basic SEO -->
    <meta name="description" content="An original horror chronicle from The Arkham Examiner.">
    <meta name="keywords" content="lovecraft, arkham, horror, eldritch, serialized fiction">
    <meta name="author" content="The Arkham Examiner">

    <!-- Open Graph -->
    <meta property="og:title" content="Whispers from the Esoteric Order | The Arkham Examiner">
    <meta property="og:description" content="An original horror chronicle from The Arkham Examiner.">
    <meta property="og:type" content="article">
    <meta property="og:image" content="https://storage.googleapis.com/msgsndr/rdO9ydj88UzwaXYh6rTr/media/6830c6751f386bdc4260cfea.png">
    <meta property="og:url" content="https://thearkhamexaminer.com/chronicle-001/chronicle-001-old/">


    <link rel="stylesheet" href="/css/style.css" />
    <link rel="icon" href="/images/favicon.ico" />

    <script>
      window.userAccessLevel = 4; // 1=text, 2=audio, 3=both, 4=admin
    </script>

  </head>
  <body>
    <h1>Whispers from the Esoteric Order</h1>

    
    <video
      class="intro-video"
      autoplay
      muted
      loop
      playsinline
	  poster=""
    >
      <source src="https://ghl.link/loop.mp4" type="video/mp4" />
    </video>
    


    
    <audio controls preload="none" style="margin-top: 1em; display: block; width: 100%;">
      <source src="https://ghl.link/intro.mp3" type="audio/mpeg" />
    </audio>
    

    
    <div class="intro-text"><p>This chronicle draws from Crowe’s first investigation into the sea-glassed foundry near Devil’s Reef. Listen closely.</p>
</div>
	
	<div id="subscription-cta" class="subscription-message hidden">
	  <div class="cta-container">
		<hr/>
		<div style="text-align: center;">
		  <p class="cta-text">Begin your descent into the Arkham Examiner archives — one chronicle at a time.</p>
		  <p><a href="https://thearkhamexaminer.com/sign-me-up" class="subscribe-button">Sign Me Up</a></p>
		  <p><br/>Already subscribed?<br/><a href="https://thearkhamexaminer.com/login" style="color: #ccc; text-decoration: underline;">Log in here.</a></p>
		</div>
	  </div>
	</div>
    

	
	<div data-access="2" class="gated-content">
	  <hr/>
	  <h3 style="text-align: center;">Listen to this haunting tale ...</h3>
	  <audio controls preload="none">
		<source src="https://ghl.link/full-chronicle.mp3" type="audio/mpeg" />
		Your browser does not support the audio element.
	  </audio>
	</div>
	

    <div class="gated-content" data-access="1">
      
	  <div class="chapter-block">
		<div class="chapter-image">
		  <img src="https://ghl.link/ch1.png" alt="The Summons" />
		</div>
		<h2>The Summons</h2>
		<div class="chapter-text">
<p>The letter arrived by night courier...</p>
</div>
	  </div>
	

	  <div class="chapter-block">
		<div class="chapter-image">
		  <img src="https://ghl.link/ch2.png" alt="Beneath the Salt" />
		</div>
		<h2>Beneath the Salt</h2>
		<div class="chapter-text">
<p>Crowe descended the slick stone staircase beneath the reef...</p>
</div>
	  </div>
	
    </div>

    <script>
      window.addEventListener('DOMContentLoaded', function () {
        const level = window.userAccessLevel;
        document.querySelectorAll(".gated-content").forEach(el => {
          const required = parseInt(el.dataset.access);
          const allow =
            level === 4 || // Admin sees everything
            (required === 1 && (level === 1 || level === 3)) ||
            (required === 2 && (level === 2 || level === 3));
          el.style.display = allow ? "block" : "none";
        });
      });
    </script>
	
	<div id="toc" class="floating-toc" data-access="1">
		<div class="toc-header" onclick="toggleToc()">
		  <span id="toc-title">Table of Contents</span>
		  <span id="toc-toggle-icon">−</span>
		</div>
	  <ul id="toc-list"></ul>
	</div>
	
	<script>
	  document.addEventListener("DOMContentLoaded", function () {
		const userAccessLevel = window.userAccessLevel || 0;
		const allowedLevels = [1, 3, 4];

		if (!allowedLevels.includes(userAccessLevel)) return;

		const toc = document.getElementById("toc");
		const tocList = document.getElementById("toc-list");

		// Add "Back to Top" link
		const topItem = document.createElement("li");
		const topLink = document.createElement("a");
		topLink.href = "#";
		topLink.textContent = "Back to Top";
		topItem.appendChild(topLink);
		tocList.appendChild(topItem);

		const headings = document.querySelectorAll(".chapter-block h2");

		headings.forEach((heading, index) => {
		  const chapterBlock = heading.closest(".chapter-block");
		  const imageContainer = chapterBlock?.querySelector(".chapter-image");

		  if (imageContainer) {
			const id = `chapter-image-${index + 1}`;
			imageContainer.id = id;

			const li = document.createElement("li");
			const a = document.createElement("a");
			a.href = `#${id}`;
			a.textContent = heading.textContent;

			li.appendChild(a);
			tocList.appendChild(li);
		  }
		});

		if (headings.length > 0) {
		  toc.style.display = "block";
		}
	  });
	</script>

	<script>
	  document.addEventListener("DOMContentLoaded", function () {
		const tocLinks = document.querySelectorAll("#toc-list a[href^='#']");
		const targets = Array.from(tocLinks).map(link => {
		  const id = link.getAttribute("href").substring(1);
		  return document.getElementById(id);
		});

		function getCurrentChapter() {
		  let activeIndex = -1;
		  const scrollY = window.scrollY + 120; // Offset for top margin

		  targets.forEach((el, index) => {
			if (el && el.offsetTop <= scrollY) {
			  activeIndex = index;
			}
		  });

		  return activeIndex;
		}

		function updateTocHighlight() {
		  const currentIndex = getCurrentChapter();

		  tocLinks.forEach((link, i) => {
			link.classList.toggle("active", i === currentIndex);
		  });
		}

		document.addEventListener("scroll", updateTocHighlight);
		window.addEventListener("load", updateTocHighlight);
	  });
	</script>
	
	<script>
	  const cta = document.getElementById('subscription-cta');

	  // Show CTA only if the user is NOT logged in
	  if (typeof window.userAccessLevel === 'undefined') {
		if (cta) {
		  cta.classList.remove('hidden');
		}
	  } else {
		if (cta) {
		  cta.classList.add('hidden');
		}
	  }
	</script>
	
	<script>
	  function toggleToc(forceCollapse = null) {
		const toc = document.getElementById("toc");
		const icon = document.getElementById("toc-toggle-icon");
		const title = document.getElementById("toc-title");

		// Toggle or force collapse
		if (forceCollapse === true) {
		  toc.classList.add("toc-collapsed");
		} else if (forceCollapse === false) {
		  toc.classList.remove("toc-collapsed");
		} else {
		  toc.classList.toggle("toc-collapsed");
		}

		// Update title and symbol
		if (toc.classList.contains("toc-collapsed")) {
		  icon.textContent = "+";
		  title.textContent = "TOC";
		} else {
		  icon.textContent = "−";
		  title.textContent = "Table of Contents";
		}
	  }

	  // Collapse on page load
	  document.addEventListener("DOMContentLoaded", function () {
		toggleToc(true); // force initial collapse
	  });
	</script>

  </body>
</html>
